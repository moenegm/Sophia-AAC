<nav class="navbar" style="background-color:#a74ef5;">
    <% if user_signed_in? %>
        <ul class="navbar-nav me-auto mb-2 ps-4">    
            <li class="nav-item">
                <%= link_to image_tag(current_user.avatar, :class =>"avatar nav-link" ), root_path %>
            </li> 
        </ul>

        <% if @categories.count == 0 %>
            <ul class="navbar-nav me-auto mb-2">    
                <li class="nav-item">
                    <%= link_to "Create a New Category", new_category_path, style:"color: #ffffff;", class:"nav-link" %>
                </li> 
            </ul>
        <% else  %>
            <% @categories.each do |category| %>
                <ul class="navbar-nav me-auto mb-2">    
                    <li class="nav-item">
                        <%= link_to category.category, posts_path(:cate => category.id), style:"color: #ffffff;", class:"nav-link" %>
                    </li> 
                </ul>
            <% end %>
        <% end %>
    <% else %>
        <ul class="navbar-nav me-auto mb-2 ps-5">
            <li class="nav-item">
                <%= link_to "Sign in", new_user_session_path, class:"nav-link" %>
            </li>
        </ul>
    <% end %>
</nav>

<script>
    $(function(){
        var current = location.pathname;
        $('.navbar-nav li a').each(function(){
            var $this = $(this);
            // if the current path is like this link, make it active
            if($this.attr('href').indexOf(current) !== -1){
                $this.addClass('active');
            }
        })
    })
</script>